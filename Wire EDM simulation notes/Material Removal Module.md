
The material removal module is responsible for simulating the erosion of the workpiece due to the electrical discharges. This is a critical component of the Wire EDM simulation as it directly determines the machined geometry.

## The erosion process in Wire EDM

In Wire EDM, the material removal occurs through a series of discrete electrical discharges that create microscopic craters on the workpiece surface. Each discharge generates an intense localized plasma channel that melts and vaporizes a small volume of material, leaving behind a roughly hemispherical crater. The size and shape of these craters depend on:

1. **Spark energy:** The energy delivered by the discharge is primarily in the form of thermal energy generated by the current pulse flowing through the plasma channel. The temporal profile of this energy delivery is critical - the pulse shape (rise time, peak current, duration) determines how the thermal energy is transferred to the workpiece material over time. This energy transfer drives several material removal mechanisms:

   - Vaporization and melting of the workpiece material
   - Formation of high-pressure plasma channel and gas jets
   - Generation and collapse of vapor bubbles creating pressure waves
   - Shock waves propagating through the material due to rapid thermal expansion and phase transitions
   
   The total energy delivered during a discharge can be calculated as:
   $$E = \int_0^{t_p} V(t)I(t)dt$$
   where $t_p$ is the pulse duration, $V(t)$ is the gap voltage, and $I(t)$ is the discharge current. While higher energy generally correlates with larger crater volumes, the efficiency of material removal depends strongly on how this energy is delivered over time. For example, a pulse with a rapid rise time and high peak current concentrates more energy early in the discharge, leading to more explosive material removal through vaporization. In contrast, a more gradual power delivery profile with lower peak current but longer duration tends to remove material primarily through melting, which can be less efficient but may produce smoother crater surfaces. Additionally, the temporal power distribution affects the relative wear between workpiece and wire electrode - shorter, more intense pulses typically cause higher wire wear compared to longer pulses of equivalent total energy.

2. **Workpiece material:** The thermophysical and chemical properties of the workpiece material significantly impact crater formation. For the same discharge energy, materials with higher melting points and thermal conductivity like tungsten carbide typically form smaller craters, while materials with lower melting points like aluminum tend to produce larger craters. The material properties also influence the characteristics of the debris particles formed during erosion, which affects the stability of the machining process through gap contamination.

3. **Dielectric properties:** The dielectric fluid plays a crucial role in crater formation during each discharge. Its thermal and electrical properties affect:
   - The breakdown voltage required to initiate the discharge, which influences the initial energy release.
   - The thermal conductivity and specific heat capacity of the fluid determine how quickly heat is extracted from the molten material pool.
   - The viscosity and density affect the dynamics of the plasma channel expansion and collapse. Some investigations (CITE) show that higher viscosity fluids tend to produce craters with a bigger volume.
 
4. **Wire material:** The wire's material composition affects crater formation through metal vapor jet mechanisms. According to experimental studies, materials with lower boiling points (like zinc coatings) generate vapor jets during discharge that collide with workpiece vapor jets, creating radial flows in the gap. These flows produce shear forces that enhance material removal, explaining why zinc-coated wires achieve higher cutting rates than uncoated wires. The wire's thermal and electrical properties also influence energy conversion efficiency during discharge, though the relative importance of these mechanisms remains debated.

5. **Gap conditions:** The local gap width and dielectric conditions at the moment of discharge significantly influence crater formation. For a single discharge, a wider gap results in a more diffuse plasma channel that distributes energy over a larger area, typically producing shallower but wider craters. Conversely, narrower gaps produce more concentrated plasma channels leading to deeper, more focused craters. The local dielectric properties (temperature, pressure, purity) at the discharge site affect the plasma channel formation and stability during the discharge duration, which directly impacts the efficiency of energy transfer to the workpiece surface and the resulting crater geometry.

### Crater formation mechanism

 The mechanism of crater formation in Wire EDM involves a complex sequence of physical processes that occur over microsecond timescales:

 1. The plasma channel formed during discharge (temperatures reaching 8000-12000K) creates intense localized heating that rapidly melts and vaporizes the workpiece material. This heating occurs in a zone of a diameter of 10-100Î¼m. 

 2. The molten and vaporized material is ejected from the crater through multiple interacting mechanisms:
    a. High pressure gas and plasma jets generated by the rapid heating and expansion of workpiece material, dielectric fluid, and wire electrode material create strong mechanical forces that eject molten material.
    b. Pressure waves and shock waves propagate through both the workpiece and dielectric due to explosive vaporization and rapid thermal expansion. These waves can cause material removal through spallation and fragmentation.
    c. Electromagnetic forces between the electrodes act on charged particles and droplets in the plasma channel.
    d. Hydrodynamic forces of the dielectric fluid can also contribute to material removal.
    e. Cavitation from vapor bubble implosion generates intense localized pressure waves that fragment and eject solidifying material.

The relative contribution of each mechanism to the final crater size and shape is highly variable and depends on the specific machining conditions. For example:

- At high discharge energies, explosive vaporization and plasma jets may dominate material removal
- At lower energies with longer pulses, melting and fluid dynamic effects could be more significant 
- Wire materials with lower boiling points (like zinc) generate larger vapor jets 
- The importance of pressure waves versus electrostatic forces likely varies with gap width
- Different workpiece materials may be more susceptible to certain removal mechanisms
- Local dielectric conditions affect plasma channel characteristics and bubble dynamics

This variability and interaction between mechanisms makes it extremely challenging to develop accurate physical models of crater formation. 

## Empirical Modeling Approach for Material Removal

Due to the complexity of crater formation physics, detailed modeling would be computationally intensive and uncertain. Instead, we use an empirical approach based on single-discharge experiments.

Key advantages for process control simulation:

1. **Computational Efficiency:** Using statistical distributions fitted to experimental data rather than physics equations allows much faster simulation.

2. **Validated Behavior:** The empirical model captures the aggregate effects of physical mechanisms in real EDM processes.

3. **Uncertainty Representation:** Probability distributions capture natural variations in crater formation for testing control strategies.

4. **Easy Calibration:** The model can be calibrated to different machine-material combinations by updating statistical parameters from experiments.

Our approach has three main steps:

1. Characterize crater volume/geometry distributions from single-discharge experiments
2. Use distributions to generate realistic crater volumes based on discharge conditions  
3. Apply sampled volumes to evolve workpiece geometry

This captures process variability while avoiding complex physics simulations, and allows calibration with experimental data.


#### Limitations

While this empirical approach is practical and computationally efficient, it has inherent limitations. Single-discharge experiments may not fully capture the complex interactions that occur during actual machining, where multiple discharges happen in rapid succession and affect local conditions. The model also cannot directly account for dynamic pulse shapes or advanced power supply strategies without additional experimental characterization. However, the approach remains valuable for process control development, as it captures the essential stochastic nature of material removal while maintaining simulation speed and flexibility. The model can be progressively enhanced with additional experimental data to better match specific machining conditions.

### Simplified 1D Erosion Model
  
For our initial approach, we make the following simplifying assumptions:

1. Each spark event removes a variable volume of material from the workpiece.
2. The eroded volume is distributed uniformly along the height of the workpiece (1D erosion).
3. The amount of material removed by each spark (crater volume) is sampled from an experimental size distribution.
4. This size distribution depends on the energy of the spark.

While these assumptions simplify the complex physics of the erosion process, they provide a tractable starting point that captures the key aspects of variable material removal and its dependence on spark energy.

### Sampling from an empirical crater volume distribution
Experimental studies have shown that the volume of material removed by individual sparks follows a certain probability distribution. The exact form of this distribution and its parameters are functions of the spark energy, which in turn depends on factors like the gap voltage, peak current, and pulse duration.

For our simplified model, we will assume that the crater volume distribution is Gaussian and depends only on the spark energy. This is a reasonable first approximation given that we are working with a discrete set of predefined pulse shapes, each characterized by a specific energy.

We can express this relationship as:
$$V_c \sim \mathcal{N}(\mu_{V_c}(E_s), \sigma_{V_c}^2(E_s))$$
where $V_c$ is the crater volume, $E_s$ is the spark energy, $\mu_{V_c}(E_s)$ is the mean crater volume for a given spark energy, and $\sigma_{V_c}(E_s)$ is the standard deviation of the crater volume for that energy.

The specific values of $\mu_{V_c}$ and $\sigma_{V_c}$ for each spark energy can be determined empirically by fitting a Gaussian distribution to crater volume data collected at different energy levels. Once these parameters are known, the simulation can sample crater volumes from the corresponding Gaussian distribution for each spark event.

### Updating the Workpiece Geometry

Given a sampled crater volume $V_c$ and the assumption of uniform erosion along the height, the module updates the 1D representation of the workpiece geometry.

In this simplified model, the workpiece geometry is represented by a single variable $x_w$, denoting the position of the workpiece surface along the X-axis (perpendicular to the wire). Our goal is to determine the increment $\Delta x_w$ in the workpiece position resulting from the removal of material volume $V_c$.

Since the erosion is uniform along the height $h_w$ of the workpiece, the removed volume $V_c$ can be expressed as the product of the cross-sectional area removed and the workpiece height:

$$V_c = A_{\text{removed}} \cdot h_w$$

Where $A_{\text{removed}}$ is the area removed in the cross-section. In our 1D model, this area corresponds to the product of the increment in workpiece position $\Delta x_w$ and the effective width of the cut, which we can approximate by the kerf $k$ (wire diameter + 2 times the gap). Thus, $A_{\text{removed}} = k \cdot \Delta x_w$.

Substituting this into the volume equation, we get:

$$V_c = k \cdot \Delta x_w \cdot h_w$$

Solving for the increment in the workpiece position $\Delta x_w$:

$$\Delta x_w = \frac{V_c}{k \cdot h_w}$$

Therefore, the workpiece position is updated as follows:

$$x_w \leftarrow x_w + \Delta x_w = x_w + \frac{V_c}{k \cdot h_w}$$

> [!note]
> This model makes an important simplifying assumption: the depth of material removal (and thus the kerf width) is approximately constant across different spark energies. While in reality there may be some variation in crater depth with energy, experimental evidence suggests this variation is relatively small compared to variations in crater volume.


### Integration with the Simulation Framework  

The material removal module operates within the broader simulation framework as follows:

1. The ignition module generates a spark event with a certain energy.
2. The material removal module samples a crater volume from the corresponding experimental distribution.
3. The workpiece geometry (erosion front position $x_w$) is updated based on this crater volume.
4. The updated geometry influences the state of other modules in the next simulation step, such as the gap distance in the ignition module.

This interaction between the modules allows the simulation to capture the evolving workpiece shape, albeit in a simplified 1D manner, and its effect on the Wire EDM process dynamics.

As the simulation progresses, the accumulated effect of many spark events, each eroding a variable amount of material, gradually advances the erosion front, sculpting the desired geometry of the workpiece. The probabilistic sampling of crater volumes captures the stochastic nature of the material removal process, while the 1D erosion assumption keeps the model tractable.
  
This simplified erosion model provides a foundation that can be extended to higher dimensions and more complex geometric representations as needed, while leveraging the modular structure of the simulation framework.

